var Dashboard,hasProp={}.hasOwnProperty;Dashboard={},function(t,e,i,s,n,o){var a,r,l,p,d,u,h,m,c,f,g,b,y,v,D,w,T,_,k,F,O,P,$,j,S,C,x,A;o.VERSION="0.1.0",l=n.Model.extend({initialize:function(t){this.set("id",t.name)},defaults:{name:null,value:null},idAttribute:"name"}),a=n.Model.extend({initialize:function(t){this.set("id",t.uid||t.name),this.setupParameters(),this.setupListeners(),s.bindAll(this,"update"),this.listenTo(this,"change:listeners",this.setupListeners),this.listenTo(this,"change:parameters",this.setupParameters)},defaults:{name:null,options:{},listeners:[],parameters:[],requestParameters:{},executeAtStart:!1,_data:null,_subjects:null,_params:null},setupParameters:function(){var t,e,a;return s.isArray(this.get("parameters"))&&this.get("parameters").length>0?(e=this.get("parameters"),t=s.difference(e,o.variables.pluck("name")),t.length>0&&console.warn("These variables do not exist : "+t.join(",")),a=new n.VirtualCollection(o.variables,{filter:function(t){return i.inArray(t.get("id"),e)>=0}}),this.set("_params",a)):void 0},setupListeners:function(){var t,e,a;return s.isArray(this.get("listeners"))&&this.get("listeners").length>0?(e=this.get("listeners"),t=s.difference(e,o.variables.pluck("name")),t.length>0&&console.warn("These variables do not exist : "+t.join(",")),a=new n.VirtualCollection(o.variables,{filter:function(t){return i.inArray(t.get("id"),e)>=0}}),this.set("_subjects",a)):void 0},update:function(){var e,n,a,r,l,p,d,u,h,m;if(u=this,r={},this.get("adhoc"))a=(this.get("database")+"."+this.get("column")).replace(/^\./,""),n=this.get("alias")||this.get("column").replace(/\./g,"_"),e=this.get("aggregate"),l=this.get("databaseFunction"),r=s.clone(this.get("dataSource")),r.columns=[{column:a,alias:n}],r.limitBy="full",r.distinctResults=!0,r.functions={orderBy:[{alias:n,order:"asc",custom:!0}]},l&&Object.keys(l).length&&(r.columns[0].databaseFunction=l),Array.isArray(e)&&e.length&&(r.columns[0].aggregate=!0,r.functions.aggregate=[{column:a,"function":e.join("_"),alias:n}]),m=i.post(t.DashboardGlobals.services,{type:"adhoc",serviceType:"report",service:"fetchData",formData:JSON.stringify(r)},function(t){"string"==typeof t&&(t=JSON.parse(t)),t.status&&u.set("_data",t.response)});else{d=this.get("requestParameters");for(p in d)hasProp.call(d,p)&&(h=d[p],r[p]=o.getVariable(h));r.dir=t.DashboardGlobals.efwddir||t.DashboardGlobals.folderpath,r.map_id=this.get("map"),this.get("dir")&&(r.dir=this.get("dir")),m=i.post(t.DashboardGlobals.updateService,{data:JSON.stringify(r).replace(/"(\[)\\/g,"$1").replace(/\\("\])"/g,"$1")},function(t,e,i){"string"==typeof t&&(t=JSON.parse(t)),u.set("_data",t)}),m.identifier=this.get("name")}return m},idAttribute:"name",validate:function(t,e){return"string"!=typeof t.name?"A name must be provided for "+t.type+" component":"string"!=typeof t.type?"Component type must be specified":"string"!=typeof t.htmlElementId?"An HTML id attribute must be provided":void 0}}),p=n.Collection.extend({model:l}),r=n.Collection.extend({model:a,initialize:function(t){this.listenTo(this,"add",this.addComponent)},addComponent:function(t,e,i){var s,n;if(s=t.get("type"),!o.Components.hasOwnProperty(s))throw new Error("Component of type <b>'"+s.toString()+"'</b> does not exist");n=new(o.Components[s.toLowerCase()])({model:t,el:t.get("htmlElementId"),id:t.get("id")}),n.render(),n.model.get("executeAtStart")===!0&&"function"==typeof n.model.update&&n.model.update.call(n.model),o.componentViews[t.get("id")]=n}}),o.components=new r([]),o.variables=new p([]),o.componentViews={},o.components.on("invalid",function(t,e){throw e}),o.components.on("reset",function(t,e){var i,s,n,o,a;for(o=e.previousModels,a=[],i=0,s=o.length;s>i;i++)n=o[i],a.push(n.trigger("remove"));return a}),o.variables.on("add",function(t){}),o.variables.on("invalid",function(t,e){throw e}),o.Components={},w=["adhoc","button","chart","table"],j=function(){var t,e,i,n;if(0===arguments.length)return!1;if(n=[],2===arguments.length&&"string"==typeof arguments[0])n.push({name:arguments[0],value:arguments[1]});else if(s.isObject(arguments[0])){e=arguments[0];for(t in e)hasProp.call(e,t)&&(i=e[t],n.push({name:t,value:i}))}o.variables.add(n,{merge:!0})},D=function(n){if(O(),!s.isArray(n))throw new Error("Dashboard.init(): Parameter is expected to be an array but "+typeof n+" given");i(e).ready(function(){var e,i,a,r,l,p,d,u,h;d={},s.isObject(t.reportParameters)&&s.isObject(t.reportParameters.reportParameters)&&(s.assign(d,t.reportParameters.reportParameters),t.reportParameters.reportParameters=null),s.isObject(t.urlParameters)&&(s.assign(d,s.omit(t.urlParameters,["dir","file","execute","refresh","parameters"])),t.urlParameters.parameters=null),s.isObject(t.parameters)&&(s.assign(d,t.parameters),t.parameters=null),n.forEach(function(t){var e,i,n;return i=t.listeners,n=Object.keys(d),e=s.intersection(i,n),e.length>0?t.executeAtStart=!0:void 0}),h=b();for(l in h)hasProp.call(h,l)&&(u=h[l],s.isArray(u)&&s.isString(d[l])&&(d[l]=[d[l]]));if(j(d),s.isObject(t.urlParameters)&&t.urlParameters.execute)for(a=t.urlParameters.execute,s.isString(a)&&(a=[a]),r=0,p=a.length;p>r;r++)i=a[r],e=o.components.get(i),e&&s.isFunction(e.update)&&setTimeout(e.update,200);return o.components.add(n,{validate:!0})})},d=function(t){return o.components.add(t,{validate:!0})},_=function(t){var e;return o.components.remove(t),e=o.componentViews[t],e&&"function"==typeof e.close?e.close():void 0},O=function(){o.components.reset([]),o.componentViews={}},x=function(t){var e;return e=o.components.get(t),e&&"function"==typeof e.update?(e.update(),!0):!1},k=function(){O(),o.variables.reset([])},v=function(t){return o.variables.get(t)?o.variables.get(t).get("value"):null},y=function(){return o.components.toJSON().filter(function(t){return w.indexOf(t.type)<0}).map(function(t){return s.omit(t,function(t,e){return"_"===e.charAt(0)})})},b=function(){var t,e;return t=o.variables.pluck("name"),e=o.variables.pluck("value"),s.object(t,e)},F=function(t){var e;return e=o.components.get(t),e?(e.set("_data",null),!0):!1},A=function(t,e){var i,n;return n=o.components.get(t),e=s.omit(e,function(t,e){return"_"===e.charAt(0)}),i=s.omit(n.attributes,function(t,e){return"_"===e.charAt(0)}),i=s.cloneDeep(i),i=s.merge(i,e),n.get("type")!==i.type?(o.removeComponent(t),o.addComponent(i)):(n.set(i,{silent:!1}),"function"==typeof n.update?n.update():void 0)},o.setVariable=j,o.init=D,o.addComponent=d,o.removeComponent=_,o.updateComponent=x,o.resetAll=k,o.getVariable=v,o.getAllVariables=b,o.getFilters=y,o.resetComponent=F,o.updateComponentOptions=A,s.templateSettings={interpolate:/\{\{(.*?)\}\}/g},o.Templates={},o.Templates.select='<select {{ multiple }} class="form-control"></select>',o.Templates.option='<option value="{{ value }}">{{ display }}</option>',o.Templates.select2='<input type="hidden" style="width:100%">',o.Templates.adhoc='<iframe src="{{url}}" name="{{name}}" class="adhoc-frame" style="border:none;width:100%;min-height:1px"></iframe>',o.Templates.datepicker='<div class="input-group"> <input name="date" class="form-control sb-disable-close"> <span class="input-group-addon pointer"> <i class="glyphicon glyphicon-calendar"></i> </span> </div>',o.Templates.daterangepicker='<div class="input-group"> <input name="daterange" class="form-control sb-disable-close"> <span class="input-group-addon pointer"> <i class="glyphicon glyphicon-calendar"></i> </span> </div>',o.Templates.button='<button class="btn {{ classes }}">{{ display }}</button>',o.Templates.chart='<div class="chart" id="{{id}}"></div> <script>{{script}}</script>',o.Templates.chartMenu='<div class="print-menu group pull-right"> <div class="btn-group"> <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"> {{ label }} <span class="caret"></span> </button> <ul class="dropdown-menu" role="menu"></ul> </div> </div>',o.Templates.chartMenuItem='<li><a href="#" id="{{ id }}">{{ display }}</a></li>',o.Templates.chartMenuItemSeparator='<li class="divider"></li>',o.Templates.alert='<div class="alert alert-{{type}} alert-fixed-{{position}} fade in"> <button type="button" class="close" data-dismiss="alert"> <span aria-hidden="true">&times;</span> <span class="sr-only">Close</span> </button> {{message}} </div>',o.Templates.modal='<div id="dashboard-modal" class="modal fade" data-backdrop="static"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <h4 class="modal-title">{{ title }}</h4> </div> <div class="modal-body"> {{ content }} </div> <div class="modal-footer"> <input type="button" class="btn btn-{{ type }}" data-dismiss="modal" value="{{ value }}"> </div> </div> </div> </div>',o.Templates.table='<table class="table {{ classes }}"> <thead><tr></tr></thead> <tbody></tbody> </table>',T=o.Templates;for(C in T)hasProp.call(T,C)&&(o.Templates[C]=s.template(o.Templates[C.trim()]));o.Defaults={},o.Defaults.button={display:"Submit",classes:"btn-primary"},o.Defaults.chart={menuLabel:"Actions"},o.Defaults.datepicker={displayFormat:"YYYY-MM-DD",outputFormat:"YYYY-MM-DD"},o.Defaults.daterangepicker={displayFormat:"YYYY-MM-DD",outputFormat:"YYYY-MM-DD"},o.Defaults.select2={placeholder:"Select an option"},P=n.View.extend({template:o.Templates.select,initialize:function(){this.listenTo(this.model,"change",this.render),this.model.get("_subjects")&&this.listenTo(this.model.get("_subjects"),"change",s.bind(this.model.update,this.model))},setupOptions:function(){if(this.options=this.model.get("options"),this.timer=!1,this.timeout=0,"string"!=typeof this.options.display)throw new Error("options.display is not specified for "+this.model.get("name"));if("string"!=typeof this.options.value)throw new Error("options.value is not specified for "+this.model.get("name"));return Boolean(this.options.multiple)?(this.options.multiple="multiple",this.timeout=1e3):this.options.multiple=""},bindings:{select:{observe:"value",events:["select.update"],onGet:function(t){var e;return e=i.isArray(t)?s.map(t,function(t){return String(t)}):String(t),"undefined"===e||"null"===e?"":e}}},close:function(){return this.unstickit(),this.$el.off(),this.$el.empty(),this.stopListening()},render:function(){var t,e,s,n,a;if(this.setupOptions(),C=i(this.template(this.options)),t=this.model.get("_data"),null!==t&&t.hasOwnProperty("data"))for(t=t.data,s=0,n=t.length;n>s;s++)e=t[s],C.append(o.Templates.option({value:e[this.options.value],display:e[this.options.display]}));return this.$el.empty().append(C),a=this,this.$el.on("change","select",function(t){var e;e=i.Event("select.update"),a.timer&&clearTimeout(a.timer),a.timer=setTimeout(function(){return i(t.target).trigger(e)},a.timeout)}),null!==this.model.get("_params")&&this.stickit(this.model.get("_params").at(0)),this}}),o.Components.select=P,$=n.View.extend({template:o.Templates.select2,initialize:function(){this.listenTo(this.model,"change",this.render),null!==this.model.get("_subjects")&&this.model.get("_subjects").on("change",s.bind(this.model.update,this.model))},setupOptions:function(){var t;if(this.options=this.model.get("options"),this.timer=!1,this.timeout=0,t=this.model.get("name"),"string"!=typeof this.options.display)throw new Error("options.display is not specified for "+t);if("string"!=typeof this.options.value)throw new Error("options.value is not specified for "+t);return this.options.multiple=Boolean(this.options.multiple),this.options.multiple?this.timeout=1e3:void 0},close:function(){return this.$("input[type=hidden]").select2("destroy"),this.unstickit(),this.$el.off(),this.$el.empty(),this.stopListening()},bindings:{"input[type=hidden]":{observe:"value",events:["select2.update"],update:function(t,e,i,s){t.select2("val",e)},getVal:function(t,e,i){return t.select2("val")}}},render:function(){var t,e,n;return this.setupOptions(),C=i(this.template()),t=this.model.get("_data"),e=[],null!==t&&t.hasOwnProperty("data")&&(t=t.data,s.each(t,function(t){var i;i={},i.id=t[this.options.value],i.text=t[this.options.display],e.push(i)},this)),this.$el.empty().append(C),n=this,this.$("input[type=hidden]").select2({placeholder:this.options.placeholder||o.Defaults.select2.placeholder,width:"resolve",closeOnSelect:!1,data:e,multiple:this.options.multiple}).on("change",function(t){var e;e=i.Event("select2.update"),n.timer&&clearTimeout(n.timer),n.timer=setTimeout(function(){return i(t.target).trigger(e)},n.timeout)}),null!==this.model.get("_params")&&this.stickit(this.model.get("_params").at(0)),this}}),o.Components.select2=$,f=n.View.extend({template:o.Templates.datepicker,initialize:function(){this.model.update=null,this.listenTo(this.model,"change",this.render)},events:{"click .input-group-addon":"triggerFocus"},setupOptions:function(){return this.options=this.model.get("options"),"string"==typeof this.options.displayFormat&&""!==this.options.displayFormat||(console.warn("Using default displayFormat as "+o.Defaults.datepicker.displayFormat+" for <b>"+this.model.get("name")+"</b>"),this.options.displayFormat=o.Defaults.datepicker.displayFormat),"string"!=typeof this.options.outputFormat||""===this.options.outputFormat?(console.warn("Using default outputFormat as "+o.Defaults.datepicker.outputFormat+" for <b>"+this.model.get("name")+"</b>"),this.options.outputFormat=o.Defaults.datepicker.outputFormat):void 0},close:function(){this.$("input[name=daterange]").data("daterangepicker").remove(),this.$el.off(),this.$el.empty(),this.unstickit(),this.stopListening()},triggerFocus:function(){this.$("input[name=date]").focus()},bindings:{"input[name=date]":{observe:"value",onGet:"toDisplay",onSet:"toModel",events:["hide.daterangepicker"],update:function(t,e,i,s){t.data("daterangepicker").setStartDate(e),t.data("daterangepicker").setEndDate(e),t.val(e)}}},toDisplay:function(t){return moment(t,this.options.outputFormat).format(this.options.displayFormat)},toModel:function(t){return moment(t,this.options.displayFormat).format(this.options.outputFormat)},render:function(){return this.setupOptions(),C=i(this.template()),this.$el.empty().append(C),C=null,this.$("input[name=date]").daterangepicker({locale:{format:this.options.displayFormat},showDropdowns:!0,singleDatePicker:!0}),null!==this.model.get("_params")&&this.stickit(this.model.get("_params").at(0)),this}}),o.Components.datepicker=f,g=n.View.extend({template:o.Templates.daterangepicker,initialize:function(){this.model.update=null,this.listenTo(this.model,"change",this.render)},setupOptions:function(){return this.options=this.model.get("options"),"string"==typeof this.options.displayFormat&&""!==this.options.displayFormat||(this.options.displayFormat=o.Defaults.daterangepicker.displayFormat),"string"==typeof this.options.outputFormat&&""!==this.options.outputFormat||(this.options.outputFormat=o.Defaults.daterangepicker.outputFormat),this.options.separator=this.options.separator||" to "},close:function(){this.$("input[name=daterange]").data("daterangepicker").remove(),this.$el.off(),this.$el.empty(),this.unstickit(),this.stopListening()},events:{"click .input-group-addon":"triggerFocus"},triggerFocus:function(){this.$("input[name=daterange]").focus()},startDatebindings:{"input[name=daterange]":{observe:"value",onGet:"toStartDateDisplay",onSet:"toStartDateModel",events:["apply.daterangepicker"],update:function(t,e,i,s){var n;n="undefined"!=typeof this.model.get("_params").at(0)?this.model.get("_params").at(0).get("value"):"",n=e+moment(n,this.options.outputFormat).format(this.options.displayFormat),t.data("daterangepicker").setStartDate(e),t.val(n)}}},endDatebindings:{"input[name=daterange]":{observe:"value",onGet:"toEndDateDisplay",onSet:"toEndDateModel",events:["apply.daterangepicker"],update:function(t,e,i,s){var n;n="undefined"!=typeof this.model.get("_params").at(1)?this.model.get("_params").at(1).get("value"):"",n=moment(n,this.options.outputFormat).format(this.options.displayFormat)+" - "+e,t.data("daterangepicker").setEndDate(e),t.val(n)}}},toStartDateDisplay:function(t){return moment(t,this.options.outputFormat).format(this.options.displayFormat)},toStartDateModel:function(t){return t=t.split(" - ")[0],moment(t,this.options.displayFormat).format(this.options.displayFormat)},toEndDateDisplay:function(t){return moment(t,this.options.outputFormat).format(this.options.displayFormat)},toEndDateModel:function(t){return t=t.split(" - ")[1],moment(t,this.options.displayFormat).format(this.options.displayFormat)},render:function(){var t,e;return this.setupOptions(),C=i(this.template()),this.$el.empty().append(C),t={locale:{format:this.options.displayFormat},showDropdowns:!0,timePicker:!!this.options.timePicker,timePickerIncrement:s.isNumber(this.options.range)&&0<(e=this.options.range)&&60>e?this.options.timePickerIncrement:0,startDate:"undefined"!=typeof this.model.get("_params").at(0)?this.model.get("_params").at(0).get("value"):moment(),endDate:"undefined"!=typeof this.model.get("_params").at(1)?this.model.get("_params").at(1).get("value"):moment()},s.isBoolean(this.options.ranges)&&this.options.ranges===!0?t.ranges=o.Defaults.dateranges:s.isObject(this.options.ranges)&&(t.ranges=this.options.ranges),this.$("input[name=daterange]").daterangepicker(t),C=t=null,null!==this.model.get("_params")&&("undefined"!=typeof this.model.get("_params").at(0)&&this.stickit(this.model.get("_params").at(0),this.startDatebindings),"undefined"!=typeof this.model.get("_params").at(1)&&this.stickit(this.model.get("_params").at(1),this.endDatebindings)),this}}),o.Components.daterangepicker=g,h=n.View.extend({template:o.Templates.button,initialize:function(){return this.listenTo(this.model,"change",this.render)},setupOptions:function(){var t;this.options=this.model.get("options"),this.model.update=s.bind(this.trigger,this),this.options.classes=this.options.classes||o.Defaults.button.classes,this.options.display=this.options.display||o.Defaults.button.display,t=this.model.get("triggers")||[],this.toTrigger=new n.VirtualCollection(o.components,{filter:function(e){return i.inArray(e.get("id"),t)>=0}}),s.bindAll(this,"trigger")},events:{"click button":"trigger"},trigger:function(){"undefined"!=typeof this.toTrigger&&this.toTrigger.each(function(t){"function"==typeof t.update&&t.update()})},close:function(){return this.$el.off(),this.$el.empty(),this.stopListening()},render:function(){return this.setupOptions(),C=i(this.template(this.options)),this.$el.empty().append(C),this}}),o.Components.button=h,m=n.View.extend({template:o.Templates.chart,initialize:function(){return this.listenTo(this.model,"change",this.render),this.model.update=function(){var e,s,n,a,r,l,p;r=this,e={},e.dir=t.DashboardGlobals.efwddir||t.DashboardGlobals.folderpath,n=this.get("requestParameters");for(s in n)hasProp.call(n,s)&&(l=n[s],e[s]=o.getVariable(l));if("undefined"==typeof this.get("vf"))throw new Error("vf property isn't defined for "+this.get("name"));return p=this.get("vf"),e.vf_id=p.id,e.vf_file=p.file,p.dir&&(e.dir=p.dir),a=i.ajax({type:"POST",url:t.DashboardGlobals.chartingService,data:{data:JSON.stringify(e).replace(/"(\[)\\/g,"$1").replace(/\\("\])"/g,"$1")}}),a.identifier=this.get("name"),a.done(function(t,e,i){"string"==typeof t&&(t=JSON.parse(t)),r.set("_data",t)}),a.always(function(){})},null!==this.model.get("_subjects")?this.listenTo(this.model.get("_subjects"),"change",s.bind(this.model.update,this.model)):void 0},setupOptions:function(){if(this.options=this.model.get("options"),"undefined"==typeof this.model.get("vf"))throw new Error("vf information is required for "+this.model.get("name")+" chart")},close:function(){return this.$el.off(),this.$el.empty(),this.stopListening()},render:function(){var t,e,n,a,r,l,p,d,u,h;if(this.setupOptions(),null===this.model.get("_data"))return this;if(t=this.model.get("_data"),t.hasOwnProperty("id")&&t.hasOwnProperty("script")){if(C=i(this.template(t)),s.isArray(this.options.actions)&&this.options.actions.length>0){for(p=i(o.Templates.chartMenu({label:this.options.menuLabel||o.Defaults.chart.menuLabel})),d=p.find("ul.dropdown-menu"),u=this.options.actions,a=n=0,l=u.length;l>n;a=++n){e=u[a],a>0&&d.append(o.Templates.chartMenuItemSeparator());for(r in e)hasProp.call(e,r)&&(h=e[r],d.append(o.Templates.chartMenuItem({id:r,display:h})))}i(C[0]).append(p)}this.$el.empty().append(C)}return this}}),o.Components.chart=m,u=n.View.extend({template:o.Templates.adhoc,initialize:function(){this.model.update=this.renderFrame.bind(this),this.listenTo(this.model,"change",this.render),null!==this.model.get("_subjects")&&this.listenTo(this.model.get("_subjects"),"change",this.renderFrame)},close:function(){this.$el.empty()},setupOptions:function(){return this.options=this.model.get("options")},renderFrame:function(){var e,i,n,a,r,l,p,d,u,h;d=this,e="report"===this.options.ext?t.DashboardGlobals.visualizeAdhoc:t.DashboardGlobals.openEfw,u=e+"?dir="+encodeURIComponent(this.options.dir)+"&file="+encodeURIComponent(this.options.file),p=this.model.get("requestParameters");for(r in p)if(hasProp.call(p,r))if(h=p[r],n=o.getVariable(h),s.isArray(n))for(a=0,l=n.length;l>a;a++)i=n[a],u+="&"+encodeURIComponent(r)+"="+encodeURIComponent(i);else u+="&"+encodeURIComponent(r)+"="+encodeURIComponent(n);u+="&mode=dashboard",t.urlParameters&&t.urlParameters.refresh&&(u+="&refresh=true"),this.frame.src=u,t.navigator.userAgent.indexOf("PhantomJS")>-1&&setTimeout(function(){return d.$("iframe").css("width",d.$el[0].offsetWidth),d.$("iframe").css("height",d.$el[0].offsetHeight)},200)},render:function(){return this.setupOptions(),this.frame=e.createElement("iframe"),this.frame.src="about:blank",this.frame.name=this.model.get("name"),this.frame.style.border="none",this.frame.style.width="100%",this.frame.style.minHeight="10px",this.$el.empty().append(this.frame),this}}),o.Components.adhoc=u,S=n.View.extend({template:o.Templates.table,initialize:function(){var t;this.options=this.model.get("options"),t=[],this.options.stripped&&t.push("table-stripped"),this.options.classes=t.join(" "),this.listenTo(this.model,"change:_data",this.render),null!==this.model.get("_subjects")&&this.model.get("_subjects").on("change",this.model.update)},render:function(){var t,e,s,n,o,a,r,l,p,d,u,h,m,c;if(C=i(this.template(this.options)),e=this.model.get("_data"),null!==e&&e.hasOwnProperty("data")&&e.data.length>0){for(c=[],m=[],e=e.data,t=i.isArray(this.options.columns)?this.options.columns:Object.keys(e[0]),o=0,p=e.length;p>o;o++){for(s=e[o],h=["<tr>"],a=0,d=t.length;d>a;a++)r=t[a],h.push("<td>"+s[r]+"</td>");h.push("</tr>"),m.push(h.join(""))}for(l=0,u=t.length;u>l;l++)n=t[l],c.push('<th data-column-id="'+n+'">'+n+"</th>");C.find("thead > tr").html(c.join("")).end().find("tbody").html(m.join(""))}return this.$el.empty().html(C),this.$el.find("table").bootgrid(),this}}),o.Components.table=S,c=n.View.extend({initialize:function(){return this.setupOptions(),this.listenTo(this.model,"change",this.render),null!==this.model.get("_subjects")?this.listenTo(this.model.get("_subjects"),"change",s.bind(this.model.update,this.model)):void 0},close:function(){return this.$el.off(),this.$el.empty(),this.stopListening()},setupOptions:function(){var t;t=this.$el,this.model.update=function(){var e;null!==this.get("_subjects")&&(e=s.object(this.get("_subjects").pluck("name"),this.get("_subjects").pluck("value"))),this.get("customScript").call(this,t,e)}},render:function(){return this.setupOptions(),this}}),o.Components.custom=c}(window,document,jQuery||$HDI,_||_HDI,Backbone||BackboneHDI,Dashboard);
//# sourceMappingURL=dashboard.js.map
